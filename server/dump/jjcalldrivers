
DROP TABLE IF EXISTS otp_verification;
CREATE TABLE otp_verification (
  id INT AUTO_INCREMENT PRIMARY KEY,
  phone VARCHAR(15) NOT NULL,
  otp VARCHAR(6) NOT NULL,
  created_at TIMESTAMP DEFAULT CURRENT_TIMESTAMP
);
DROP TABLE IF EXISTS CUSTOMERS;
CREATE TABLE `CUSTOMERS`(
  `ID` int NOT NULL AUTO_INCREMENT,
  `NAME` varchar(128)  NULL,
  `PHONE` varchar(64) NOT NULL,
    PRIMARY KEY (`ID`),
     UNIQUE KEY unique_phone (`PHONE`)
  );

  DROP TABLE IF EXISTS SUPPORTTEAM;
  CREATE TABLE `SUPPORTTEAM`(
  `ID` int NOT NULL AUTO_INCREMENT,
  `USERNAME` VARCHAR(255),
  `PASSWORD` VARCHAR(255),
   PRIMARY KEY (`ID`)
  );
  INSERT INTO SUPPORTTEAM (USERNAME , PASSWORD) VALUES("SAM" , "SAM@123");
DROP TABLE IF EXISTS DRIVERS;
CREATE TABLE `DRIVERS`(
`ID` int NOT NULL AUTO_INCREMENT,
`NAME` VARCHAR(255),
`LOCATION` VARCHAR(255),
`MOBILE` VARCHAR(50),
`LICENCENO` VARCHAR(50),
`BLOODGRP` VARCHAR(10),
`AGE` VARCHAR(10),
`GENDER` VARCHAR(10),
`DOB` DATE NULL,
`FEES_DETAILS` VARCHAR(50),
`PAYMENT_METHOD` VARCHAR(50),
`EXPERIENCE` VARCHAR(50),
`CAR_TYPE` VARCHAR(50),
`STATUS` VARCHAR(10) DEFAULT 'offline',
`LAT` VARCHAR(50),
`LNG` VARCHAR(50),
PRIMARY KEY (`ID`)
);

DROP TABLE IF EXISTS bookings;
CREATE TABLE bookings (
  id INT AUTO_INCREMENT PRIMARY KEY,
  customer_name VARCHAR(100) NOT NULL,
  customer_mobile VARCHAR(15) NOT NULL,
  booking_phnno VARCHAR(15) NOT NULL,
  pickup VARCHAR(255) NOT NULL,
  pickup_lat DECIMAL(10,7),
  pickup_lng DECIMAL(10,7),

  drop_location VARCHAR(255),

  driver_id INT NULL,

  status ENUM('pending','accepted','assigned','inride','completed') DEFAULT 'pending',

  created_at TIMESTAMP DEFAULT CURRENT_TIMESTAMP,

  CONSTRAINT fk_booking_driver
    FOREIGN KEY (driver_id)
    REFERENCES drivers(id)
    ON DELETE SET NULL
);

DROP TABLE IF EXISTS accept_booking;

CREATE TABLE accept_booking (
  id INT AUTO_INCREMENT PRIMARY KEY,

  booking_id INT NOT NULL,

  driver_id INT NOT NULL,
  driver_name VARCHAR(100) NOT NULL,
  driver_mobile VARCHAR(15) NOT NULL,

  accepting_time TIMESTAMP DEFAULT CURRENT_TIMESTAMP,

  FOREIGN KEY (booking_id) REFERENCES bookings(id),
  FOREIGN KEY (driver_id) REFERENCES drivers(id)
);
